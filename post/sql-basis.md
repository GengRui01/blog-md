---
title: "数据库知识点整理"
tags: ["SQL", "Interview"]
date: 2019-12-11
---

数据库相关知识点整理

<!--more-->

## 联表查询

- join：默认是inner join，找出左右都可匹配的记录
- left join：左连接，以左表为准，逐条去右表找可匹配字段，如果有多条会逐次列出，如果没有找到则是NULL
- right join：右连接，以右表为准，逐条去左表找可匹配字段，如果有多条会逐次列出，如果没有找到则是NULL
- full outer join: 全连接，包含两个表的连接结果，如果左表缺失或者右表缺失的数据会填充NULL

## 常用函数

- distinct：对结果集去重，对全部选择字段进行去重，并不能针对其中部分字段进行去重
- group by：聚合函数帮助我们进行基本的数据统计，例如计算最大值、最小值、平均值、总数、求和
- where/having：筛选
- order by：排序
- case when：条件函数
- concat( A, B...)：字符串连接函数
- split(str, regex)：用于将str按regex提取，分隔后转换为array
- substr（str,0,len) 截取str从0位开始的长度为len个字符

## 索引

- 作用：索引是对数据库表中一或多个列的值进行排序的结构，是帮助MySQL高效获取数据的数据结构
- 分类：普通索引、唯一索引、主键索引、全文索引（MySQL中）
- 优缺点：
    - 索引加快数据库的检索速度
    - 索引降低了插入、删除、修改等维护任务的速度
    - 唯一索引可以确保每一行数据的唯一性
    - 通过使用索引，可以在查询的过程中使用优化隐藏器，提高系统的性能
    - 索引需要占物理和数据空间
- 底层实现
    - 索引就是使用B+树来实现的，而B+树就是一种数据结构，可以优化查询速度，所以可以利用索引来优化慢查询。
    - 因为B+树的节点中包含的值个数（多个值）比二叉树（1个值）更多，所以在B+树中查询所需要的节点数就更少。
    - 那么如果每次读取的成本是一样的话，因为 总成本=读取次数*单次读取成本，我们就可以证明B+树的查询成本就比二叉树小得多了.

## 索引失效
- 隐式转换导致索引失效

```sql
# 失效的例子
select * from test where tu_mdn=13333333333;
# 正确的例子
select * from test where tu_mdn=‘13333333333’;
```

- 对索引列进行运算导致索引失效

```sql
# 失效的例子
select * from test where id-1=9;
# 正确的例子
select * from test where id=10;
```

- 使用 <> 、not in 、not exist、!=导致索引失效

其他的索引失效参考https://blog.csdn.net/u014368614/article/details/86711236